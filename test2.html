<!DOCTYPE html>
<script src="nandraki.js"></script>
<html>
<body style="width:100%;height:100%;  touch-action: none; overflow: auto; ">

<script>

scale = 'scale(1)';
document.body.style.webkitTransform =  scale;     // Chrome, Opera, Safari
document.body.style.msTransform =   scale;       // IE 9
document.body.style.transform = scale;          // Geral
document.body.style.zoom=1;


Nandraki.create_sprite("player","player.png",64,64,32,50);

Nandraki.create_box("box_player",25,25,32,50,true);

const player = new Nandraki("player",10,1.5,5);



frame=10;
di=0;
up=0;
scala=1;
anim="parado";


jogo = {
    start : function() {
	
	
	if(anim=="abaixar"){

		game.img_frame("img_player",64,64,6,1,1,1);
			 	
		if(frame>=1)frame=1

	}

	if(anim=="parado"){
				
		game.img_frame("img_player",64,64,6,frame++,3,8);
			 	
		if(frame>=8)frame=3

	}else if(scala==1){
		
		game.force_obj("player",di,up,false);
		anim=="corre"
		game.img_frame("img_player",64,64,6,frame++,13,10);
	 	if(frame==15)frame=10
	}else{
    
		game.force_obj("player",di,up,true);	
	
		game.img_frame("img_player",64,64,6,frame++,15,10);
	 	if(frame==15)frame=10
	}

	
          playerlocal=game.coord(player.body);
	
	/*
	if(game.colidir_force_r(player.id,"chao",true)==true && check_chao_in_player==true){
		di+=5
	}

	if(game.colidir(player.id,"chao")==true && check_chao_in_player==true){
		up=up
	}else{
	up+=gravidade

	}
	*/
	
	

	
	/*
	stick=game.get_obj("stick");	
	base=game.get_obj("base-stick");
	
	if(stick.offsetLeft == 32){
	  parado();
	  di=di;	
	}else if(stick.offsetLeft >= -10){
		scala=1;
		di+=1.5;
		corre();
	} 
	else if(stick.offsetLeft < 50){
		scala=-1;
		di-=1.5;
		corre();
	}
   
	if(stick.offsetTop <= -1 ){
		up-=25;
	}
	
	
	 //console.log("Stick = Top: "+stick.style.top+ " / "+ " left: "+stick.style.left)
	//console.log("Base  = Top: "+base.style.top+ " / "+ " left: "+base.style.left)
	
	
     game.click_start("stick",jump);
	*/

	
	

	

	},

     	
}

//const log = document.getElementById('body');
//document.addEventListener('keydown', logKey1);

game.log_key;
game.log_down(logKey1);

function logKey1(e) {

   if( e.code == "KeyS") {
 	anim="abaixar"
		
	}
   if( e.code == "KeyD") {
	anim="corre";
	 //corre();
	
	
		 
		 di+=3;
		 scala=1; 
		 game.force_obj("player",di,up,false);
		
		
	}
if( e.code == "KeyA") {
	  anim="corre";
	  //corre();
	
	           di-=3;
	     	 scala=-1;
		 game.force_obj("player",di,up,true);
	
	  		
	}

if(e.code == "KeyW"){
	   if(pulo==false){
	
	     up-=150;
	   }
		
	}
}


game.log_up(logKey2);

function logKey2(e) {
     
  if(e.code == "KeyW"){
	  pulo==true;
	
	}	

	
   if( e.code == "KeyS") {
	
	   
	 	
	}
   if( e.code == "KeyA") {
	 
	
	anim="parado";
	//parado();
		
	}
   else if( e.code == "KeyD") {
	
	anim="parado";
	// parado();
		
	}	
   if(e.code == "KeyW"){
   

   }
}
function jump() {

  up-=100;
}

game.update(jogo.start,60);


</script>

<body >
</html>
